# 幻獣闘技

この二人用オンライン専用ボードゲームSPAは、ふわふわ盤友会(@ff_boardgames)さまが作成されたボードゲーム「幻獣闘技」SPA化したものです。

SPA版「幻獣闘技」は、6×5の戦場とサイコロ置き場、兵種残数、エネルギートークンを表示する領域を持ちます。
作成は いずむ(@ezmscrap)であり、許諾は受けておらず、 「幻獣闘技」に感銘を受けたため、SPA開発の練習も兼ねて実装しています。


## セットアップ

```bash
npm install
npm run dev
```

- `npm run build` … 型チェック+本番ビルド
- `npm run preview` … ビルド済み成果物の確認

## 画面構成と主な機能

- **ゲームボード**: 6行×5列のマスをクリックしてユニット配置・移動・入れ替えを実行。配置可能マスや移動可能マスはハイライトで案内されます。
- **サイコロ群置き場**: R1↔R3の3スロット。ステップ6で銀→銀→金の順に配置し、通常/作戦/起死回生アクション後は仕様どおり再配置します。
- **プレイヤーパネル**: 兵種別残数、ユニット作成用カード残数、エネルギートークン(右からT1/T2/T3)を表示。どれかの兵種が0になると敗北が宣言されます。
- **手順パネル**: 現在の手順、対象プレイヤー、必要な操作（ユニット作成、次アクション選択、ダイスロールなど）を表示し、完了できるときのみ「手順完了」ボタンが有効になります。
- **モーダル群**: プレイヤー名/先行決定、ユニット作成、ユニット配置、次アクション選択、ダイス再配置、3Dダイスロールなど、仕様に沿ったモーダルを実装しています。
- **3Dダイス演出**: `@react-three/fiber`+`@react-three/cannon`で銀/金ダイスを物理演算。各面に剣士/魔術師/策士のマークを表示し、結果と画面下のテキストが一致します。

## 操作の流れ

1. 手順1のモーダルでプレイヤー名を確定し、ラジオボタンで先行を決定します。
2. 手順2〜5では案内に従ってユニット作成→配置を所定回数繰り返し、配置前ユニットがない場合は「配置済みユニットを入れ替える」を選択できます。
3. 手順6でサイコロを配置し、以降は手順7→16を周回します。エネルギー0の場合は自動で通常アクションが選ばれます。
4. 通常/作戦/起死回生アクションでは使用するダイス数に応じた演出が走り、得られた兵種別移動可能数が0になるまで移動します（敵を除外した時点で終了）。
5. ユニット除外時や策士移動時にエネルギーが加算され、勝利条件を満たすと全画面オーバーレイで勝者を表示。再戦ボタンで初期化できます。

## 謝辞

### 原作「幻獣闘技」

[ふわふわ盤友会](https://www.x.com/ff_boardgames)が開発したボードゲーム

### 効果音クレジット

すべて [Springin’ Sound Stock](https://www.springin.org/sound-stock/) の音源を規約に従って使用しています。

| 用途 | 音源名 (カテゴリ) | ファイル |
| --- | --- | --- |
| 剣士攻撃 | 剣ぶつかり合い3（戦闘#剣・刀） | `public/audio/sword_attack.mp3` |
| 魔術師攻撃 | 魔法詠唱2（戦闘#魔法） | `public/audio/mage_attack.mp3` |
| 策士攻撃 | 銃を構える（戦闘） | `public/audio/tactician_attack.mp3` |
| ドラゴン移動 | 地響き3短（環境音） | `public/audio/dragon_move.mp3` |
| グリフォン移動 | 強風3（生活） | `public/audio/griffin_move.mp3` |
| ユニコーン移動 | 足音3（生活） | `public/audio/unicorn_move.mp3` |
| ボタン押下 | スイッチ1（ボタン・システム） | `public/audio/button_click.mp3` |
| ラジオ選択 | 仕掛け作動2（ボタン・システム） | `public/audio/radio_select.mp3` |
| ユニット/ダイス配置 | カードを置く（生活） | `public/audio/card_place.mp3` |
| 単独ダイスロール | 大きいシングルダイス2（生活#サイコロ） | `public/audio/dice_single.mp3` |
| 複数ダイスロール | 大きいダブルダイス2（生活#サイコロ） | `public/audio/dice_multi.mp3` |
| キャンセル | キャンセル（ボタン・システム） | `public/audio/cancel.mp3` |

ライセンス・利用方法の詳細は [Springin’ Sound Stock のガイドライン](https://www.springin.org/sound-stock/guideline/) を参照してください。

### アイコンクレジット

| 用途 | アイコン名 (カテゴリ) | ファイル |
| --- | --- | --- |
| サイコロアイコン | Material Symbols Outlined (Swords / Auto Fix High / Chess) | `public/icons/*.svg` |

